(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{340:function(e,t,a){"use strict";a.r(t);var s=a(33),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"utilisation-de-la-librairie-fzaninotto-faker-dans-un-projet-symfony"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utilisation-de-la-librairie-fzaninotto-faker-dans-un-projet-symfony"}},[e._v("#")]),e._v(" Utilisation de la librairie "),a("code",[e._v("Fzaninotto\\Faker")]),e._v(" dans un projet Symfony")]),e._v(" "),a("p",[a("code",[e._v("Fzaninotto\\Faker")]),e._v(" est une librairie PHP permettant de générer des données factices pour peupler les pages\nde vos appliaction avant de disposer de données réelles.\nCela permet notamment de valider que votre design est adapté aux edge cases (p.ex, sur un blog : articles très longs, titres courts... );\nde tester les formats de date, l'intégration d'images ou l'aspect responsive de l'ensemble")]),e._v(" "),a("h2",{attrs:{id:"installation-de-faker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation-de-faker"}},[e._v("#")]),e._v(" Installation de Faker")]),e._v(" "),a("p",[e._v("Comme toute bibliothèque php publiée sur "),a("a",{attrs:{href:"https://packagist.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://packagist.org"),a("OutboundLink")],1),e._v(", "),a("a",{attrs:{href:"https://packagist.org/packages/fzaninotto/faker",target:"_blank",rel:"noopener noreferrer"}},[e._v("Fzaninotto\\Faker"),a("OutboundLink")],1),e._v(" s'installe via "),a("code",[e._v("composer")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("composer require --dev fzaninotto\\faker\n")])])]),a("blockquote",[a("p",[e._v("NB le "),a("code",[e._v("--dev")]),e._v(" de la commande composer permet de séparer les dépendances destinées exclusivement au développement de celles utilisées en production")])]),e._v(" "),a("blockquote",[a("p",[e._v("NB2 :La documentation de la bibliothèque se trouve dans le fichier README accessible sur le "),a("a",{attrs:{href:"https://github.com/fzaninotto/Faker",target:"_blank",rel:"noopener noreferrer"}},[e._v("repository github de Faker"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"configuration-du-service-container-pour-l-utilisation-de-faker-en-tant-que-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration-du-service-container-pour-l-utilisation-de-faker-en-tant-que-service"}},[e._v("#")]),e._v(" Configuration du Service Container pour l'utilisation de "),a("code",[e._v("Faker")]),e._v(" en tant que service")]),e._v(" "),a("blockquote",[a("p",[e._v("Symfony utilise "),a("a",{attrs:{href:"https://eilgin.github.io/php-the-right-way/#dependency_injection",target:"_blank",rel:"noopener noreferrer"}},[e._v("l'injection de dépendances"),a("OutboundLink")],1),e._v(" pour permettre\nun accès aux différents services (ex: Logging, ORM...) utilisés dans l'application. "),a("a",{attrs:{href:"https://symfony.com/doc/current/service_container.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Doc"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("Symfony fournit une manière simple d'accéder au conteneur de Services et permet d'injecter\nles objets/services dans les méthodes automatiquement (comme l'objet $request dans les controleurs)\nen utilisant le Type Hinting (faire référence à la classe de l'objet que l'on souhaite utiliser dans la signature de la méthode):")]),e._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Symfony\\"),a("span",{pre:!0,attrs:{class:"token package"}},[e._v("HttpFoundation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Request")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("dd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'index.html.twig'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("blockquote",[a("p",[e._v("Le fichier de configuration du container se trouve dans "),a("code",[e._v("config/services.yaml")])])]),e._v(" "),a("p",[e._v("Sous la clé "),a("code",[e._v("services:")]),e._v(" de ce fichier, la configuration par défaut du framework, qui permet d'appliquer la configuration\nautomatique aux classes sous le namespace "),a("code",[e._v("App\\")]),e._v(" qui sont situées dans le répertoire "),a("code",[e._v("../src/")]),e._v(" du projet (lignes 10 à 24)")]),e._v(" "),a("p",[e._v("Il est également possible de configurer des services manuellement. Deux choses sont nécessaires :")]),e._v(" "),a("ul",[a("li",[e._v("Le nom complet de la classe de l'objet (le service)")]),e._v(" "),a("li",[e._v("Une méthode pour la création (et, éventuellement la configuration) de cet objet")])]),e._v(" "),a("p",[e._v("La manière dont est construit Faker permet assez facilement de l'intégrer à Symfony en utilisant ce mécanisme.\nSelon la documentation, pour utiliser Faker, il faut récupérer l'objet renvoyé par la méthode "),a("code",[e._v("create()")]),e._v(" de classe "),a("code",[e._v("Faker\\Factory")]),e._v("\n(une factory est une classe qui peut renvoyer des instances concrètes d'une autre classe. Il s'agit d'un "),a("a",{attrs:{href:"https://fr.wikipedia.org/wiki/Fabrique_(patron_de_conception)",target:"_blank",rel:"noopener noreferrer"}},[e._v("design pattern courant dans le génie logiciel"),a("OutboundLink")],1),e._v(".\nIl n'est donc pas nécessaire d'implémenter une méthode se chargeant de la création de l'objet")]),e._v(" "),a("p",[e._v("À la fin de `config/services.yaml ajouter sous la clé services:")]),e._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("### lignes 1-24 configuration par défaut de Symfony")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ...     ")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# la classe renvoyée par Faker\\Factory::create()")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# NB    le nom de la classe permet à la fois l'autoloading ")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#       et la référence au service. C'est ce nom de classe que")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#       nous utiliserons dans les signatures des méthodes pour")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#       récupérer l'objet faker ")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("Faker\\Generator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" \n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("factory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Faker\\Factory'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'ceate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# la classe et la méthode appelées pour créer le service")]),e._v("\n")])])]),a("h2",{attrs:{id:"utilisation-dans-un-autre-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utilisation-dans-un-autre-service"}},[e._v("#")]),e._v(" Utilisation dans un autre service")]),e._v(" "),a("p",[e._v("ex. "),a("code",[e._v("App\\Services\\ArticleRepository")])]),e._v(" "),a("blockquote",[a("p",[e._v("créer la classe dans "),a("code",[e._v("src/Services/ArticlesGenerator.php")])])]),e._v(" "),a("p",[e._v("Injecter Faker dans le constructeur de la classe :")]),e._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[e._v("Faker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ArticleRepository")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("private")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$faker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("__construct")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Faker\\"),a("span",{pre:!0,attrs:{class:"token package"}},[e._v("Generator")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$faker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("faker")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$faker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])]),a("h2",{attrs:{id:"utilisation-dans-l-action-d-un-controller"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utilisation-dans-l-action-d-un-controller"}},[e._v("#")]),e._v(" Utilisation dans l'action d'un controller")]),e._v(" "),a("p",[a("strong",[e._v("exemple:")])]),e._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Request "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" Faker\\"),a("span",{pre:!0,attrs:{class:"token package"}},[e._v("Generator")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$faker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// utiliser faker pour générer un email ")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$email")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$faker")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("email")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// retourner une réponse")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'email => '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$email")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);