<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Utilisation de la librairie Fzaninotto\Faker dans un projet Symfony | Symfony 5</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="">
    <link rel="preload" href="/intro-symfony/assets/css/0.styles.802f7288.css" as="style"><link rel="preload" href="/intro-symfony/assets/js/app.c5613cc0.js" as="script"><link rel="preload" href="/intro-symfony/assets/js/2.32c20540.js" as="script"><link rel="preload" href="/intro-symfony/assets/js/26.08ccc245.js" as="script"><link rel="prefetch" href="/intro-symfony/assets/js/10.7a48bf67.js"><link rel="prefetch" href="/intro-symfony/assets/js/11.d6d6186d.js"><link rel="prefetch" href="/intro-symfony/assets/js/12.cf58528b.js"><link rel="prefetch" href="/intro-symfony/assets/js/13.51745c1b.js"><link rel="prefetch" href="/intro-symfony/assets/js/14.8030e0c0.js"><link rel="prefetch" href="/intro-symfony/assets/js/15.0661bd88.js"><link rel="prefetch" href="/intro-symfony/assets/js/16.e3abad96.js"><link rel="prefetch" href="/intro-symfony/assets/js/17.425533e8.js"><link rel="prefetch" href="/intro-symfony/assets/js/18.b7d49a6a.js"><link rel="prefetch" href="/intro-symfony/assets/js/19.3b66b076.js"><link rel="prefetch" href="/intro-symfony/assets/js/20.ed67e9d7.js"><link rel="prefetch" href="/intro-symfony/assets/js/21.0445fcf9.js"><link rel="prefetch" href="/intro-symfony/assets/js/22.d6f4e492.js"><link rel="prefetch" href="/intro-symfony/assets/js/23.ac666944.js"><link rel="prefetch" href="/intro-symfony/assets/js/24.8af6fae6.js"><link rel="prefetch" href="/intro-symfony/assets/js/25.b3fdb5e4.js"><link rel="prefetch" href="/intro-symfony/assets/js/27.ddf308b8.js"><link rel="prefetch" href="/intro-symfony/assets/js/3.79dd08a4.js"><link rel="prefetch" href="/intro-symfony/assets/js/4.49eadb4e.js"><link rel="prefetch" href="/intro-symfony/assets/js/5.99f2def5.js"><link rel="prefetch" href="/intro-symfony/assets/js/6.d0fb1724.js"><link rel="prefetch" href="/intro-symfony/assets/js/7.dd9779d1.js"><link rel="prefetch" href="/intro-symfony/assets/js/8.0224412b.js"><link rel="prefetch" href="/intro-symfony/assets/js/9.8bed0ea1.js">
    <link rel="stylesheet" href="/intro-symfony/assets/css/0.styles.802f7288.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/intro-symfony/" class="home-link router-link-active"><!----> <span class="site-name">Symfony 5</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/intro-symfony/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Cours Menu" class="dropdown-title"><span class="title">Cours</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          1. Introduction : 
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/intro-symfony/0-intro/" class="nav-link">
  └ Généralités
</a></li><li class="dropdown-subitem"><a href="/intro-symfony/0-intro/symfony.html" class="nav-link">
  └ Le framework Symfony
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/intro-symfony/1-developper-une-application/" class="nav-link">
  2. Développer une application avec le framework Symfony
</a></li><li class="dropdown-item"><!----> <a href="/intro-symfony/2-controllers-et-routes/" class="nav-link">
  3. Controllers et Routes
</a></li><li class="dropdown-item"><!----> <a href="/intro-symfony/3-les-vues-avec-twig/" class="nav-link">
  4. Vues : Twig le moteur de templates
</a></li><li class="dropdown-item"><!----> <a href="/intro-symfony/4-doctrine/" class="nav-link">
  5. Modèle : l'ORM Doctrine
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Orga Menu" class="dropdown-title"><span class="title">Infos pratiques</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/intro-symfony/_infos/seances.html" class="nav-link">
  Planning
</a></li><li class="dropdown-item"><!----> <a href="/intro-symfony/_infos/evaluation.html" class="nav-link">
  Evaluation
</a></li></ul></div></div><div class="nav-item"><a href="/intro-symfony/_exercices/" class="nav-link">
  Exercices
</a></div><div class="nav-item"><a href="/intro-symfony/_references/" class="nav-link">
  Références
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/intro-symfony/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Cours Menu" class="dropdown-title"><span class="title">Cours</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          1. Introduction : 
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/intro-symfony/0-intro/" class="nav-link">
  └ Généralités
</a></li><li class="dropdown-subitem"><a href="/intro-symfony/0-intro/symfony.html" class="nav-link">
  └ Le framework Symfony
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/intro-symfony/1-developper-une-application/" class="nav-link">
  2. Développer une application avec le framework Symfony
</a></li><li class="dropdown-item"><!----> <a href="/intro-symfony/2-controllers-et-routes/" class="nav-link">
  3. Controllers et Routes
</a></li><li class="dropdown-item"><!----> <a href="/intro-symfony/3-les-vues-avec-twig/" class="nav-link">
  4. Vues : Twig le moteur de templates
</a></li><li class="dropdown-item"><!----> <a href="/intro-symfony/4-doctrine/" class="nav-link">
  5. Modèle : l'ORM Doctrine
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Orga Menu" class="dropdown-title"><span class="title">Infos pratiques</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/intro-symfony/_infos/seances.html" class="nav-link">
  Planning
</a></li><li class="dropdown-item"><!----> <a href="/intro-symfony/_infos/evaluation.html" class="nav-link">
  Evaluation
</a></li></ul></div></div><div class="nav-item"><a href="/intro-symfony/_exercices/" class="nav-link">
  Exercices
</a></div><div class="nav-item"><a href="/intro-symfony/_references/" class="nav-link">
  Références
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/intro-symfony/" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/intro-symfony/0-intro/" class="sidebar-heading clickable"><span>Introduction</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/intro-symfony/1-developper-une-application/" class="sidebar-heading clickable"><span>Dévlopper une application</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/intro-symfony/2-controllers-et-routes/" class="sidebar-heading clickable"><span>Routes et Contrôleurs</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/intro-symfony/3-les-vues-avec-twig/" class="sidebar-link">Vues: Twig comme moteur de templates</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/intro-symfony/4-doctrine/" class="sidebar-heading clickable"><span>Modèle: l'ORM Doctrine</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/intro-symfony/_references/" class="sidebar-link">Références</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/intro-symfony/_tips/" class="sidebar-heading clickable router-link-active open"><span>Exemples</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/intro-symfony/_tips/faker.html" class="active sidebar-link">Utilisation de la librairie Fzaninotto\Faker dans un projet Symfony</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="utilisation-de-la-librairie-fzaninotto-faker-dans-un-projet-symfony"><a href="#utilisation-de-la-librairie-fzaninotto-faker-dans-un-projet-symfony" class="header-anchor">#</a> Utilisation de la librairie <code>Fzaninotto\Faker</code> dans un projet Symfony</h1> <p><code>Fzaninotto\Faker</code> est une librairie PHP permettant de générer des données factices pour peupler les pages
de vos appliaction avant de disposer de données réelles.
Cela permet notamment de valider que votre design est adapté aux edge cases (p.ex, sur un blog : articles très longs, titres courts... );
de tester les formats de date, l'intégration d'images ou l'aspect responsive de l'ensemble</p> <h2 id="installation-de-faker"><a href="#installation-de-faker" class="header-anchor">#</a> Installation de Faker</h2> <p>Comme toute bibliothèque php publiée sur <a href="https://packagist.org" target="_blank" rel="noopener noreferrer">https://packagist.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://packagist.org/packages/fzaninotto/faker" target="_blank" rel="noopener noreferrer">Fzaninotto\Faker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> s'installe via <code>composer</code></p> <div class="language- extra-class"><pre><code>composer require --dev fzaninotto\faker
</code></pre></div><blockquote><p>NB le <code>--dev</code> de la commande composer permet de séparer les dépendances destinées exclusivement au développement de celles utilisées en production</p></blockquote> <blockquote><p>NB2 :La documentation de la bibliothèque se trouve dans le fichier README accessible sur le <a href="https://github.com/fzaninotto/Faker" target="_blank" rel="noopener noreferrer">repository github de Faker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="configuration-du-service-container-pour-l-utilisation-de-faker-en-tant-que-service"><a href="#configuration-du-service-container-pour-l-utilisation-de-faker-en-tant-que-service" class="header-anchor">#</a> Configuration du Service Container pour l'utilisation de <code>Faker</code> en tant que service</h2> <blockquote><p>Symfony utilise <a href="https://eilgin.github.io/php-the-right-way/#dependency_injection" target="_blank" rel="noopener noreferrer">l'injection de dépendances<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> pour permettre
un accès aux différents services (ex: Logging, ORM...) utilisés dans l'application. <a href="https://symfony.com/doc/current/service_container.html" target="_blank" rel="noopener noreferrer">Doc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>Symfony fournit une manière simple d'accéder au conteneur de Services et permet d'injecter
les objets/services dans les méthodes automatiquement (comme l'objet $request dans les controleurs)
en utilisant le Type Hinting (faire référence à la classe de l'objet que l'on souhaite utiliser dans la signature de la méthode):</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">index</span><span class="token punctuation">(</span>Symfony\<span class="token package">HttpFoundation<span class="token punctuation">\</span>Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">dd</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'index.html.twig'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>Le fichier de configuration du container se trouve dans <code>config/services.yaml</code></p></blockquote> <p>Sous la clé <code>services:</code> de ce fichier, la configuration par défaut du framework, qui permet d'appliquer la configuration
automatique aux classes sous le namespace <code>App\</code> qui sont situées dans le répertoire <code>../src/</code> du projet (lignes 10 à 24)</p> <p>Il est également possible de configurer des services manuellement. Deux choses sont nécessaires :</p> <ul><li>Le nom complet de la classe de l'objet (le service)</li> <li>Une méthode pour la création (et, éventuellement la configuration) de cet objet</li></ul> <p>La manière dont est construit Faker permet assez facilement de l'intégrer à Symfony en utilisant ce mécanisme.
Selon la documentation, pour utiliser Faker, il faut récupérer l'objet renvoyé par la méthode <code>create()</code> de classe <code>Faker\Factory</code>
(une factory est une classe qui peut renvoyer des instances concrètes d'une autre classe. Il s'agit d'un <a href="https://fr.wikipedia.org/wiki/Fabrique_(patron_de_conception)" target="_blank" rel="noopener noreferrer">design pattern courant dans le génie logiciel<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
Il n'est donc pas nécessaire d'implémenter une méthode se chargeant de la création de l'objet</p> <p>À la fin de `config/services.yaml ajouter sous la clé services:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token comment">### lignes 1-24 configuration par défaut de Symfony</span>
    <span class="token comment"># ...     </span>
    <span class="token comment"># la classe renvoyée par Faker\Factory::create()</span>
    <span class="token comment"># NB    le nom de la classe permet à la fois l'autoloading </span>
    <span class="token comment">#       et la référence au service. C'est ce nom de classe que</span>
    <span class="token comment">#       nous utiliserons dans les signatures des méthodes pour</span>
    <span class="token comment">#       récupérer l'objet faker </span>
    <span class="token key atrule">Faker\Generator</span><span class="token punctuation">:</span> 
        <span class="token key atrule">factory</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'Faker\Factory'</span><span class="token punctuation">,</span> <span class="token string">'ceate'</span><span class="token punctuation">]</span> <span class="token comment"># la classe et la méthode appelées pour créer le service</span>
</code></pre></div><h2 id="utilisation-dans-un-autre-service"><a href="#utilisation-dans-un-autre-service" class="header-anchor">#</a> Utilisation dans un autre service</h2> <p>ex. <code>App\Services\ArticleRepository</code></p> <blockquote><p>créer la classe dans <code>src/Services/ArticlesGenerator.php</code></p></blockquote> <p>Injecter Faker dans le constructeur de la classe :</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Services</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Faker</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ArticleRepository</span> <span class="token punctuation">{</span>
  
  <span class="token keyword">private</span> <span class="token variable">$faker</span><span class="token punctuation">;</span>
  
  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span>Faker\<span class="token package">Generator</span> <span class="token variable">$faker</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">faker</span> <span class="token operator">=</span> <span class="token variable">$faker</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h2 id="utilisation-dans-l-action-d-un-controller"><a href="#utilisation-dans-l-action-d-un-controller" class="header-anchor">#</a> Utilisation dans l'action d'un controller</h2> <p><strong>exemple:</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">index</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> Faker\<span class="token package">Generator</span> <span class="token variable">$faker</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// utiliser faker pour générer un email </span>
    <span class="token variable">$email</span> <span class="token operator">=</span> <span class="token variable">$faker</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">email</span><span class="token punctuation">;</span>
   <span class="token comment">// retourner une réponse</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email =&gt; '</span><span class="token punctuation">.</span><span class="token variable">$email</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Dernière mise à jour:</span> <span class="time">5/18/2020, 7:42:23 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/intro-symfony/_references/" class="prev">
        Références
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/intro-symfony/assets/js/app.c5613cc0.js" defer></script><script src="/intro-symfony/assets/js/2.32c20540.js" defer></script><script src="/intro-symfony/assets/js/26.08ccc245.js" defer></script>
  </body>
</html>
